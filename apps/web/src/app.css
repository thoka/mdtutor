/* Base styles - most styling comes from rpl-cloned CSS */
/* Only minimal overrides here if needed */

/* Fix scrolling - override body overflow hidden from computed.css */
body {
  overflow: auto !important;
  background-color: var(--rpf-off-white, #f8f8f8) !important;
}

.c-layout {
  flex: 1 1 0%;
  background-color: var(--rpf-off-white, #f8f8f8);
}

/* Hide Material Symbols icon text content completely */
.rpf-button__icon.material-symbols-sharp {
  font-size: 0 !important;
  line-height: 0 !important;
  width: 24px;
  height: 24px;
  display: inline-block;
  position: relative;
  overflow: hidden;
  text-indent: -9999px;
  white-space: nowrap;
  flex-shrink: 0;
}

/* Show icon using ::before pseudo-element with SVG arrow */
.rpf-button__icon.material-symbols-sharp::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  width: 24px;
  height: 24px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none'%3E%3Cpath d='M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z' fill='%23ffffff'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  text-indent: 0;
}

/* Override for right chevron */
.c-project-step-navigation__link--next .rpf-button__icon.material-symbols-sharp::before {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none'%3E%3Cpath d='M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z' fill='%23ffffff'/%3E%3C/svg%3E");
}

/* Code block dark background - override light background from computed.css */
pre[class*="language-"]:not(.scratchblocks) {
  background: #2d2d2d !important;
  color: #f8f8f2 !important;
  border-radius: 0.3em;
  padding: 1em;
  margin: 0.5em 0;
  overflow: auto;
}

/* Scratch blocks should have transparent/white background */
pre.scratchblocks,
pre.language-blocks3 {
  background: transparent !important;
  padding: 0 !important;
  color: inherit !important;
}

/* Ensure scratchblocks SVG containers have proper styling */
.scratchblocks svg {
  display: block;
}

/* Ensure code inside pre also has dark background */
pre[class*="language-"]:not(.scratchblocks) code {
  background: transparent !important;
  color: inherit !important;
}

/* Inline code should keep light background */
:not(pre) > code[class*="language-"] {
  background: rgb(245, 242, 240) !important;
  color: inherit;
}

/* Ensure sidebar stays sticky and doesn't scroll out of view */
@media (width > 62.5rem) {
  .c-sidebar {
    position: sticky !important;
    top: 0 !important;
    align-self: flex-start !important;
    max-height: 100vh;
    overflow-y: auto;
  }
}

/* Ensure iframes are visible - override general iframe { display: none; } rule */
.c-project-steps__content iframe,
.c-project__step-content iframe,
.scratch-preview iframe,
.c-wysiwyg-new iframe,
div.scratch-preview iframe,
.c-project-steps__content .scratch-preview iframe,
.c-project__step-content .scratch-preview iframe,
.c-wysiwyg-new .scratch-preview iframe {
  display: block !important;
  visibility: visible !important;
  position: static !important;
  min-width: 0 !important;
  min-height: 0 !important;
  max-width: 100% !important;
  max-height: none !important;
  top: auto !important;
  left: auto !important;
  margin: 0 auto var(--space-3) !important;
}

.scratch-preview,
.c-project-steps__content .scratch-preview,
.c-project__step-content .scratch-preview,
.c-wysiwyg-new .scratch-preview {
  display: block !important;
  visibility: visible !important;
}

.knowledge-quiz-question__feedback-item--show,
.knowledge-quiz-question .knowledge-quiz-question__feedback-item--show,
.knowledge-quiz-question--unanswered .knowledge-quiz-question__feedback-item--show,
li.knowledge-quiz-question__feedback-item--show,
.knowledge-quiz-question__feedback-item.knowledge-quiz-question__feedback-item--show {
  display: list-item !important;
  visibility: visible !important;
}

.knowledge-quiz-question__feedback-item--show.knowledge-quiz-question__feedback-item--correct,
.knowledge-quiz-question__feedback-item.knowledge-quiz-question__feedback-item--show.knowledge-quiz-question__feedback-item--correct {
  list-style-image: url("data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='15'%20cy='15'%20r='15'%20fill='%2342B961'/%3e%3cpath%20d='M7%2016L11.5%2020.5L22%2010'%20stroke='white'%20stroke-width='3'/%3e%3c/svg%3e") !important;
}

.knowledge-quiz-question--unanswered ul.knowledge-quiz-question__feedback:has(.knowledge-quiz-question__feedback-item--show),
ul.knowledge-quiz-question__feedback:has(.knowledge-quiz-question__feedback-item--show),
.knowledge-quiz-question--unanswered .knowledge-quiz-question__feedback:has(.knowledge-quiz-question__feedback-item--show) {
  display: block !important;
}

.c-project__content iframe,
.c-project-steps iframe,
#skiptocontent iframe {
  display: block !important;
  visibility: visible !important;
  position: static !important;
  top: auto !important;
  left: auto !important;
}

form.knowledge-quiz-question.knowledge-quiz-question--hidden,
.knowledge-quiz-question.knowledge-quiz-question--hidden {
  display: none !important;
  visibility: hidden !important;
}

/* Sidebar progress indicators */
.c-step-progress-circle {
  width: 38px;
  height: 38px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border: 2px solid #ddd;
  background: white;
  color: #666;
  transition: all 0.2s ease;
  position: relative;
}

.c-step-progress-circle--done {
  width: 22px !important;
  height: 22px !important;
  background-color: #42B961 !important;
  border-color: #42B961 !important;
  margin-right: 8px; /* Adjust margin to keep visual balance with larger circles */
}

/* Decent small checkmark (proportional to smaller circle) */
.c-step-progress-circle--done::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 12px;
  height: 12px;
  background-color: white;
  mask-image: url("data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%2016L11.5%2020.5L22%2010'%20stroke='white'%20stroke-width='4'/%3e%3c/svg%3e");
  mask-size: contain;
  mask-repeat: no-repeat;
  mask-position: center;
}

.c-step-progress-circle--in-progress {
  border-color: #000 !important;
  color: #000 !important;
}

.c-step-progress-circle--quiz {
  border-color: #007bff !important;
  color: #007bff !important;
}

/* Fraction-style 3/4 layout - tight */
.c-step-progress-fraction {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  font-size: 11px;
  line-height: 1;
}

.c-step-progress-fraction__num {
  transform: translate(1px, -3px);
  
}

.c-step-progress-fraction__sep {
  font-size: 16px;
  opacity: 0.3;
  transform: scaleX(0.7) rotate(10deg);
  margin: 0 -1px;
}

.c-step-progress-fraction__den {
  transform: translate(-1px, 3px);
  opacity: 0.7;
}

.c-project-navigation__link {
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  gap: 12px !important;
  padding-right: 8px !important;
}

.c-project-navigation__title {
  flex: 1;
  text-align: left;
}
